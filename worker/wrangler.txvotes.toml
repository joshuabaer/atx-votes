name = "txvotes-api"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Custom domain routes for txvotes.app
routes = [
  { pattern = "txvotes.app/*", zone_name = "txvotes.app" },
  { pattern = "www.txvotes.app/*", zone_name = "txvotes.app" },
]

# Static assets (headshot images served at /headshots/*)
[assets]
directory = "./public"

# KV namespace for cached election data (shared with atxvotes-api)
[[kv_namespaces]]
binding = "ELECTION_DATA"
id = "1b02b19492f243c8b503d99d0ff11761"

# No cron â€” relies on atxvotes-api's daily updater via shared KV
# [triggers]
# crons = ["0 12 * * *"]

# Environment variables (public, non-secret)
[vars]
CF_BEACON_TOKEN = ""    # Set after creating Web Analytics site for txvotes.app

# Secrets (set via `npx wrangler secret put -c wrangler.txvotes.toml`):
#   ANTHROPIC_API_KEY - your Anthropic API key
#   ADMIN_SECRET - secret for manual trigger endpoint
